#!/bin/sh
# -*- coding: utf-8 -*-
###############################################################################
ANSI_BLACK="\033[37;30m"
ANSI_RED="\033[37;31m"
ANSI_GREEN="\033[37;32m"
ANSI_YELLOW="\033[37;33m"
ANSI_BLUE="\033[37;34m"
ANSI_MAGENTA="\033[37;35m"
ANSI_CYAN="\033[37;36m"
ANSI_WITHE="\033[37;37m"
ANSI_RESET="\033[37;39m"
ANSI_RESET2="\033[0m"
INIT_DIR=`pwd`
GIT_URL=git://git.opendreambox.org/git/openembedded.git
[ -d $INIT_DIR/src ] || mkdir -p $INIT_DIR/src
###############################################################################

#Download opendreambox-1.6
cd $INIT_DIR/src
if 	[ -d openembedded-1.6/.git ]; then
	echo "Update opendreambox-1.6"
	cd openembedded-1.6
	git pull
else
	echo "Download opendreambox-1.6"
	[ -d openembedded-1.6 ] && rm -rf openembedded-1.6
	git clone -n $GIT_URL openembedded-1.6
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von opendreambox-1.6"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	cd openembedded-1.6
	git checkout -f opendreambox-1.6
fi

#Download opendreambox-1.5
cd $INIT_DIR/src
if 	[ -d openembedded-1.5/.git ]; then
	echo "Update opendreambox-1.5"
	cd openembedded-1.5
	git pull
else
	echo "Download opendreambox-1.5"
	[ -d openembedded-1.5 ] && rm -rf openembedded-1.5
	git clone -n $GIT_URL openembedded-1.5
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von opendreambox-1.5"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	cd openembedded-1.5
	git checkout -f opendreambox-1.5
fi

#Download Bitbake 1.8-dream for OE 1.6
cd $INIT_DIR/src
[ -d $INIT_DIR/src/bb ] || mkdir -p $INIT_DIR/src/bb
cd bb
if 	[ -d 1.8-dream/.git ]; then
	echo "Update bitbake 1.8-dream"
	cd 1.8-dream
	git pull
else
	echo "Download bitbake 1.8-dream"
	[ -d 1.8-dream ] && rm -rf 1.8-dream
	git clone git://git.opendreambox.org/git/bitbake.git 1.8-dream
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von bitbake-1.8-dream"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	cd 1.8-dream
	git checkout -f 1.8-dream
fi

#Bitbake holen und für den Gebrauch in Python 2.6 patchen
cd $INIT_DIR/src
[ -d $INIT_DIR/src/bb ] || mkdir -p $INIT_DIR/src/bb
cd bb
SVN_BITBAKE_PARENT="svn://svn.berlios.de/bitbake/"
for BB_VERSION in "1.6.8" "1.8.12"
do
	echo "download bitbake-${BB_VERSION}"
	#[ -d ${BB_VERSION} ] && rm -rf ${BB_VERSION}
	svn checkout ${SVN_BITBAKE_PARENT}/tags/bitbake-${BB_VERSION} ${BB_VERSION}
	if ( test $? -ne 0 ) then
		wget http://download.berlios.de/bitbake/bitbake-${BB_VERSION}.tar.gz
		if ( test $? -ne 0 ) then
			wget http://download2.berlios.de/bitbake/bitbake-${BB_VERSION}.tar.gz
			if ( test $? -ne 0 ) then
				echo -e $ANSI_RED"Fehler beim downloaden von bitbake-${BB_VERSION}"$ANSI_RESET2
				exit 72		#Code für: wichtige Systemdatei fehlt
			fi;
		fi;
		tar xvfz bitbake-${BB_VERSION}.tar.gz
		mv bitbake-${BB_VERSION} ${BB_VERSION}
	fi;
	echo "patch bitbake-${BB_VERSION}"
	if ( test -d ${BB_VERSION} ) then
		rm -fr ${BB_VERSION}a
		cp -r ${BB_VERSION} ${BB_VERSION}a
		CUT1CMD="1,/start-file-${BB_VERSION}a/ d"
		CUT2CMD="/end-file-${BB_VERSION}a/,$ d"
		sed -e "$CUT1CMD" -e "$CUT2CMD" < $INIT_DIR/download.sh | uudecode -o ${BB_VERSION}a.diff
		patch -Nsp1 -d ${BB_VERSION}a < ${BB_VERSION}a.diff
	else
		echo -e $ANSI_RED"konnte Verzeichnis $PWD/${BB_VERSION} nicht finden"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
done

#Download enigma2 from branch experimental
cd $INIT_DIR/src
if [ -d $INIT_DIR/src/enigma2/.git ];then
	echo "Update enigma2 from branch experimental"
	cd enigma2
	git pull
else
	echo "Download enigma2 from branch experimental"
	[ -d $INIT_DIR/src/enigma2 ] && rm -rf $INIT_DIR/src/enigma2
	git clone git://git.opendreambox.org/git/enigma2.git
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von enigma2 source"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	cd enigma2
	git checkout -f experimental
fi

#Download enigma2-plugins from branch master
cd $INIT_DIR/src
if [ -d $INIT_DIR/src/enigma2-plugins/.git ];then
	echo "Update enigma2-plugins from branch master"
	cd enigma2-plugins
	git pull
else
	echo "Download enigma2-plugins from branch master"
	[ -d $INIT_DIR/src/enigma2-plugins ] && rm -rf $INIT_DIR/src/enigma2-plugins
	git clone git://schwerkraft.elitedvb.net/enigma2-plugins/enigma2-plugins.git
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von enigma2-plugins source"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	cd enigma2-plugins
	git checkout -f master
fi

#Download enigma1
cd $INIT_DIR/src
if [ -d $INIT_DIR/src/enigma/CVS ]; then
	echo "Update enigma1 from CVS"
	cd $INIT_DIR/src/enigma
	cvs update -P -A
else
	echo "Download enigma1 from CVS"
	[ -d $INIT_DIR/src/enigma ] && rm -rf $INIT_DIR/src/enigma
	export CVS_RSH=ssh
	cvs -d anoncvs@cvs.tuxbox.org:/cvs/tuxbox co apps/tuxbox/enigma
	if ( test $? -ne 0 ) then
		echo -e $ANSI_RED"Fehler beim downloaden von enigma1 source"$ANSI_RESET2
		exit 72		#Code für: wichtige Systemdatei fehlt
	fi;
	mv apps/tuxbox/enigma .
	rm -rf apps
fi
exit 0

start-file-1.6.8a
begin-base64 644 1.6.8a.diff
ZGlmZiAtTmF1ciAxLjYuOC9iaW4vYml0YmFrZSAxLjYuOGEvYmluL2JpdGJh
a2UKLS0tIDEuNi44L2Jpbi9iaXRiYWtlCTIwMDktMDEtMDIgMTM6NDA6MDYu
MDAwMDAwMDAwICswMTAwCisrKyAxLjYuOGEvYmluL2JpdGJha2UJMjAwOC0x
Mi0yOCAwMDoxOTo0NS4wMDAwMDAwMDAgKzAxMDAKQEAgLTI2LDEyICsyNiwx
NSBAQAogc3lzLnBhdGguaW5zZXJ0KDAsb3MucGF0aC5qb2luKG9zLnBhdGgu
ZGlybmFtZShvcy5wYXRoLmRpcm5hbWUoc3lzLmFyZ3ZbMF0pKSwgJ2xpYicp
KQogaW1wb3J0IGJiCiBmcm9tIGJiIGltcG9ydCB1dGlscywgZGF0YSwgcGFy
c2UsIGV2ZW50LCBjYWNoZSwgcHJvdmlkZXJzCi1mcm9tIHNldHMgaW1wb3J0
IFNldAogaW1wb3J0IGl0ZXJ0b29scywgb3B0cGFyc2UsIHNyZV9jb25zdGFu
dHMKK3RyeToKKyAgICBzZXQKK2V4Y2VwdCBOYW1lRXJyb3I6CisgICAgZnJv
bSBzZXRzIGltcG9ydCBTZXQgYXMgc2V0CiAKIHBhcnNlc3BpbiA9IGl0ZXJ0
b29scy5jeWNsZSggcid8Ly1cXCcgKQogCi1fX3ZlcnNpb25fXyA9ICIxLjYu
OCIKK19fdmVyc2lvbl9fID0gIjEuNi44YSIKIAogIz09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0jCiAjIEJCUGFyc2luZ1N0YXR1cwpAQCAtNTIs
MTMgKzU1LDEzIEBACiAgICAgICAgIHNlbGYuYmJmaWxlX2NvbmZpZ19wcmlv
cml0aWVzID0gW10KICAgICAgICAgc2VsZi5pZ25vcmVkX2RlcGVuZGVuY2ll
cyA9IE5vbmUKICAgICAgICAgc2VsZi5wb3NzaWJsZV93b3JsZCA9IFtdCi0g
ICAgICAgIHNlbGYud29ybGRfdGFyZ2V0ID0gU2V0KCkKKyAgICAgICAgc2Vs
Zi53b3JsZF90YXJnZXQgPSBzZXQoKQogICAgICAgICBzZWxmLnBrZ19wbiA9
IHt9CiAgICAgICAgIHNlbGYucGtnX2ZuID0ge30KICAgICAgICAgc2VsZi5w
a2dfcHZwciA9IHt9CiAgICAgICAgIHNlbGYucGtnX2RwID0ge30KICAgICAg
ICAgc2VsZi5wbl9wcm92aWRlcyA9IHt9Ci0gICAgICAgIHNlbGYuYWxsX2Rl
cGVuZHMgPSBTZXQoKQorICAgICAgICBzZWxmLmFsbF9kZXBlbmRzID0gc2V0
KCkKICAgICAgICAgc2VsZi5idWlsZF9hbGwgPSB7fQogICAgICAgICBzZWxm
LmRlcHMgPSB7fQogICAgICAgICBzZWxmLnJ1bmRlcHMgPSB7fQpAQCAtNzgs
NyArODEsNyBAQAogICAgICAgICBwdiAgICAgICA9IGJiX2NhY2hlLmdldFZh
cignUFYnLCBmaWxlX25hbWUsIFRydWUpCiAgICAgICAgIHByICAgICAgID0g
YmJfY2FjaGUuZ2V0VmFyKCdQUicsIGZpbGVfbmFtZSwgVHJ1ZSkKICAgICAg
ICAgZHAgICAgICAgPSBpbnQoYmJfY2FjaGUuZ2V0VmFyKCdERUZBVUxUX1BS
RUZFUkVOQ0UnLCBmaWxlX25hbWUsIFRydWUpIG9yICIwIikKLSAgICAgICAg
cHJvdmlkZXMgID0gU2V0KFtwbl0gKyAoYmJfY2FjaGUuZ2V0VmFyKCJQUk9W
SURFUyIsIGZpbGVfbmFtZSwgVHJ1ZSkgb3IgIiIpLnNwbGl0KCkpCisgICAg
ICAgIHByb3ZpZGVzICA9IHNldChbcG5dICsgKGJiX2NhY2hlLmdldFZhcigi
UFJPVklERVMiLCBmaWxlX25hbWUsIFRydWUpIG9yICIiKS5zcGxpdCgpKQog
ICAgICAgICBkZXBlbmRzICAgPSAgYmIudXRpbHMuZXhwbG9kZV9kZXBzKGJi
X2NhY2hlLmdldFZhcigiREVQRU5EUyIsIGZpbGVfbmFtZSwgVHJ1ZSkgb3Ig
IiIpCiAgICAgICAgIHBhY2thZ2VzICA9IChiYl9jYWNoZS5nZXRWYXIoJ1BB
Q0tBR0VTJywgZmlsZV9uYW1lLCBUcnVlKSBvciAiIikuc3BsaXQoKQogICAg
ICAgICBwYWNrYWdlc19keW5hbWljID0gKGJiX2NhY2hlLmdldFZhcignUEFD
S0FHRVNfRFlOQU1JQycsIGZpbGVfbmFtZSwgVHJ1ZSkgb3IgIiIpLnNwbGl0
KCkKQEAgLTEwNCw3ICsxMDcsNyBAQAogICAgICAgICAjIEZvcndhcmQ6IHZp
cnR1YWwgLT4gW2ZpbGVuYW1lc10KICAgICAgICAgIyBSZXZlcnNlOiBQTiAt
PiBbdmlydHVhbHNdCiAgICAgICAgIGlmIHBuIG5vdCBpbiBzZWxmLnBuX3By
b3ZpZGVzOgotICAgICAgICAgICAgc2VsZi5wbl9wcm92aWRlc1twbl0gPSBT
ZXQoKQorICAgICAgICAgICAgc2VsZi5wbl9wcm92aWRlc1twbl0gPSBzZXQo
KQogICAgICAgICBzZWxmLnBuX3Byb3ZpZGVzW3BuXSB8PSBwcm92aWRlcwog
CiAgICAgICAgIGZvciBwcm92aWRlIGluIHByb3ZpZGVzOgpAQCAtMTEyLDcg
KzExNSw3IEBACiAgICAgICAgICAgICAgICAgc2VsZi5wcm92aWRlcnNbcHJv
dmlkZV0gPSBbXQogICAgICAgICAgICAgc2VsZi5wcm92aWRlcnNbcHJvdmlk
ZV0uYXBwZW5kKGZpbGVfbmFtZSkKIAotICAgICAgICBzZWxmLmRlcHNbZmls
ZV9uYW1lXSA9IFNldCgpCisgICAgICAgIHNlbGYuZGVwc1tmaWxlX25hbWVd
ID0gc2V0KCkKICAgICAgICAgZm9yIGRlcCBpbiBkZXBlbmRzOgogICAgICAg
ICAgICAgc2VsZi5hbGxfZGVwZW5kcy5hZGQoZGVwKQogICAgICAgICAgICAg
c2VsZi5kZXBzW2ZpbGVfbmFtZV0uYWRkKGRlcCkKQEAgLTkwNyw3ICs5MTAs
NyBAQAogICAgICAgICBzZWxmLnN0YXR1cyA9IEJCUGFyc2luZ1N0YXR1cygp
CiAKICAgICAgICAgaWdub3JlID0gYmIuZGF0YS5nZXRWYXIoIkFTU1VNRV9Q
Uk9WSURFRCIsIHNlbGYuY29uZmlndXJhdGlvbi5kYXRhLCAxKSBvciAiIgot
ICAgICAgICBzZWxmLnN0YXR1cy5pZ25vcmVkX2RlcGVuZGVuY2llcyA9IFNl
dCggaWdub3JlLnNwbGl0KCkgKQorICAgICAgICBzZWxmLnN0YXR1cy5pZ25v
cmVkX2RlcGVuZGVuY2llcyA9IHNldCggaWdub3JlLnNwbGl0KCkgKQogCiAg
ICAgICAgIHNlbGYuaGFuZGxlQ29sbGVjdGlvbnMoIGJiLmRhdGEuZ2V0VmFy
KCJCQkZJTEVfQ09MTEVDVElPTlMiLCBzZWxmLmNvbmZpZ3VyYXRpb24uZGF0
YSwgMSkgKQogCmRpZmYgLU5hdXIgMS42LjgvbGliL2JiL0NPVy5weSAxLjYu
OGEvbGliL2JiL0NPVy5weQotLS0gMS42LjgvbGliL2JiL0NPVy5weQkyMDA5
LTAxLTAyIDEzOjQwOjA2LjAwMDAwMDAwMCArMDEwMAorKysgMS42LjhhL2xp
Yi9iYi9DT1cucHkJMjAwOC0xMi0yOCAwMDoyMjo1NS4wMDAwMDAwMDAgKzAx
MDAKQEAgLTI2LDE3ICsyNiwzMiBAQAogZnJvbSBpbnNwZWN0IGltcG9ydCBn
ZXRtcm8KIAogaW1wb3J0IGNvcHkKLWltcG9ydCB0eXBlcywgc2V0cwotdHlw
ZXMuSW1tdXRhYmxlVHlwZXMgPSB0dXBsZShbIFwKLSAgICB0eXBlcy5Cb29s
ZWFuVHlwZSwgXAotICAgIHR5cGVzLkNvbXBsZXhUeXBlLCBcCi0gICAgdHlw
ZXMuRmxvYXRUeXBlLCBcCi0gICAgdHlwZXMuSW50VHlwZSwgXAotICAgIHR5
cGVzLkxvbmdUeXBlLCBcCi0gICAgdHlwZXMuTm9uZVR5cGUsIFwKLSAgICB0
eXBlcy5UdXBsZVR5cGUsIFwKLSAgICBzZXRzLkltbXV0YWJsZVNldF0gKyBc
Ci0gICAgbGlzdCh0eXBlcy5TdHJpbmdUeXBlcykpCitpbXBvcnQgdHlwZXMK
K3RyeToKKyAgICBzZXQKKyAgICB0eXBlcy5JbW11dGFibGVUeXBlcyA9IHR1
cGxlKFsgXAorICAgICAgICB0eXBlcy5Cb29sZWFuVHlwZSwgXAorICAgICAg
ICB0eXBlcy5Db21wbGV4VHlwZSwgXAorICAgICAgICB0eXBlcy5GbG9hdFR5
cGUsIFwKKyAgICAgICAgdHlwZXMuSW50VHlwZSwgXAorICAgICAgICB0eXBl
cy5Mb25nVHlwZSwgXAorICAgICAgICB0eXBlcy5Ob25lVHlwZSwgXAorICAg
ICAgICB0eXBlcy5UdXBsZVR5cGUsIFwKKyAgICAgICAgZnJvemVuc2V0XSAr
IFwKKyAgICAgICAgbGlzdCh0eXBlcy5TdHJpbmdUeXBlcykpCitleGNlcHQg
TmFtZUVycm9yOgorICAgIGltcG9ydCBzZXRzCisgICAgdHlwZXMuSW1tdXRh
YmxlVHlwZXMgPSB0dXBsZShbIFwKKyAgICAgICAgdHlwZXMuQm9vbGVhblR5
cGUsIFwKKyAgICAgICAgdHlwZXMuQ29tcGxleFR5cGUsIFwKKyAgICAgICAg
dHlwZXMuRmxvYXRUeXBlLCBcCisgICAgICAgIHR5cGVzLkludFR5cGUsIFwK
KyAgICAgICAgdHlwZXMuTG9uZ1R5cGUsIFwKKyAgICAgICAgdHlwZXMuTm9u
ZVR5cGUsIFwKKyAgICAgICAgdHlwZXMuVHVwbGVUeXBlLCBcCisgICAgICAg
IHNldHMuSW1tdXRhYmxlU2V0XSArIFwKKyAgICAgICAgbGlzdCh0eXBlcy5T
dHJpbmdUeXBlcykpCisKIAogTVVUQUJMRSA9ICJfX211dGFibGVfXyIKIApk
aWZmIC1OYXVyIDEuNi44L2xpYi9iYi9kYXRhX3NtYXJ0LnB5IDEuNi44YS9s
aWIvYmIvZGF0YV9zbWFydC5weQotLS0gMS42LjgvbGliL2JiL2RhdGFfc21h
cnQucHkJMjAwOS0wMS0wMiAxMzo0MDowNi4wMDAwMDAwMDAgKzAxMDAKKysr
IDEuNi44YS9saWIvYmIvZGF0YV9zbWFydC5weQkyMDA4LTEyLTI4IDAwOjE4
OjI5LjAwMDAwMDAwMCArMDEwMApAQCAtMzEsOSArMzEsMTEgQEAKIGltcG9y
dCBjb3B5LCBvcywgcmUsIHN5cywgdGltZSwgdHlwZXMKIGZyb20gYmIgICBp
bXBvcnQgbm90ZSwgZGVidWcsIGVycm9yLCBmYXRhbCwgdXRpbHMsIG1ldGhv
ZHBvb2wKIGZyb20gQ09XICBpbXBvcnQgQ09XRGljdEJhc2UKLWZyb20gc2V0
cyBpbXBvcnQgU2V0CiBmcm9tIG5ldyAgaW1wb3J0IGNsYXNzb2JqCi0KK3Ry
eToKKyAgICBzZXQKK2V4Y2VwdCBOYW1lRXJyb3I6CisgICAgZnJvbSBzZXRz
IGltcG9ydCBTZXQgYXMgc2V0CiAKIF9fc2V0dmFyX2tleXdvcmRfXyA9IFsi
X2FwcGVuZCIsIl9wcmVwZW5kIl0KIF9fc2V0dmFyX3JlZ2V4cF9fID0gcmUu
Y29tcGlsZSgnKD9QPGJhc2U+Lio/KSg/UDxrZXl3b3JkPl9hcHBlbmR8X3By
ZXBlbmQpKF8oP1A8YWRkPi4qKSk/JykKQEAgLTEzMCw3ICsxMzIsNyBAQAog
ICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgIHNlbGYuX3NwZWNp
YWxfdmFsdWVzW2tleXdvcmRdLmFkZCggYmFzZSApCiAgICAgICAgICAgICBl
eGNlcHQ6Ci0gICAgICAgICAgICAgICAgc2VsZi5fc3BlY2lhbF92YWx1ZXNb
a2V5d29yZF0gPSBTZXQoKQorICAgICAgICAgICAgICAgIHNlbGYuX3NwZWNp
YWxfdmFsdWVzW2tleXdvcmRdID0gc2V0KCkKICAgICAgICAgICAgICAgICBz
ZWxmLl9zcGVjaWFsX3ZhbHVlc1trZXl3b3JkXS5hZGQoIGJhc2UgKQogCiAg
ICAgICAgICAgICByZXR1cm4KQEAgLTE0NSw3ICsxNDcsNyBAQAogICAgICAg
ICBpZiAnXycgaW4gdmFyOgogICAgICAgICAgICAgb3ZlcnJpZGUgPSB2YXJb
dmFyLnJmaW5kKCdfJykrMTpdCiAgICAgICAgICAgICBpZiBub3Qgc2VsZi5f
c2Vlbl9vdmVycmlkZXMuaGFzX2tleShvdmVycmlkZSk6Ci0gICAgICAgICAg
ICAgICAgc2VsZi5fc2Vlbl9vdmVycmlkZXNbb3ZlcnJpZGVdID0gU2V0KCkK
KyAgICAgICAgICAgICAgICBzZWxmLl9zZWVuX292ZXJyaWRlc1tvdmVycmlk
ZV0gPSBzZXQoKQogICAgICAgICAgICAgc2VsZi5fc2Vlbl9vdmVycmlkZXNb
b3ZlcnJpZGVdLmFkZCggdmFyICkKIAogICAgICAgICAjIHNldHRpbmcgdmFy
CmRpZmYgLU5hdXIgMS42LjgvbGliL2JiL2ZldGNoL2dpdC5weSAxLjYuOGIv
bGliL2JiL2ZldGNoL2dpdC5weQotLS0gMS42LjgvbGliL2JiL2ZldGNoL2dp
dC5weQkyMDA5LTExLTIxIDEzOjMzOjU2LjAwMDAwMDAwMCArMDEwMAorKysg
MS42LjhiL2xpYi9iYi9mZXRjaC9naXQucHkJMjAwOS0xMS0yMSAxNDoyMDo0
MS4wMDAwMDAwMDAgKzAxMDAKQEAgLTEsMjQgKzEsMjQgQEAKKyMhL3Vzci9i
aW4vZW52IHB5dGhvbgogIyBleDp0cz00OnN3PTQ6c3RzPTQ6ZXQKICMgLSot
IHRhYi13aWR0aDogNDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJz
LW1vZGU6IG5pbCAtKi0KICIiIgogQml0QmFrZSAnRmV0Y2gnIGdpdCBpbXBs
ZW1lbnRhdGlvbgogCi0iIiIKK0NvcHlyaWdodCAoQykgMjAwNSBSaWNoYXJk
IFB1cmRpZQogCi0jQ29weXJpZ2h0IChDKSAyMDA1IFJpY2hhcmQgUHVyZGll
Ci0jCi0jIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2Fu
IHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Ci0jIGl0IHVuZGVyIHRo
ZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVy
c2lvbiAyIGFzCi0jIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBG
b3VuZGF0aW9uLgotIwotIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQg
aW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKLSMgYnV0IFdJ
VEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQg
d2FycmFudHkgb2YKLSMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9S
IEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQotIyBHTlUgR2VuZXJh
bCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgotIwotIyBZb3Ug
c2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJh
bCBQdWJsaWMgTGljZW5zZSBhbG9uZwotIyB3aXRoIHRoaXMgcHJvZ3JhbTsg
aWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9u
LCBJbmMuLAotIyA1MSBGcmFua2xpbiBTdHJlZXQsIEZpZnRoIEZsb29yLCBC
b3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgorVGhpcyBwcm9ncmFtIGlzIGZy
ZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBt
b2RpZnkgaXQgdW5kZXIKK3RoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3
YXJlCitGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNl
bnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlcgordmVyc2lvbi4K
KworVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRo
YXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCitBTlkgV0FSUkFO
VFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJD
SEFOVEFCSUxJVFkgb3IgRklUTkVTUworRk9SIEEgUEFSVElDVUxBUiBQVVJQ
T1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBt
b3JlIGRldGFpbHMuCisKK1lvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNv
cHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFsb25nIHdp
dGgKK3RoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBT
b2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLCA1OSBUZW1wbGUKK1BsYWNlLCBT
dWl0ZSAzMzAsIEJvc3RvbiwgTUEgMDIxMTEtMTMwNyBVU0EuIAorIiIiCiAK
IGltcG9ydCBvcywgcmUKIGltcG9ydCBiYgpAQCAtMzUsMjYgKzM1LDcwIEBA
CiAgICAgICAgIGZvciBuYW1lIGluIGRpcnM6CiAgICAgICAgICAgICBvcy5y
bWRpcihvcy5wYXRoLmpvaW4ocm9vdCwgbmFtZSkpCiAKLWRlZiBydW5naXRj
bWQoY21kLGQpOgorZGVmIHJ1bmZldGNoY21kKGNtZCwgZCwgcXVpZXQgPSBG
YWxzZSk6CiAKICAgICBiYi5kZWJ1ZygxLCAiUnVubmluZyAlcyIgJSBjbWQp
CiAKICAgICAjIE5lZWQgdG8gZXhwb3J0IFBBVEggYXMgZ2l0IGlzIGxpa2Vs
eSB0byBiZSBpbiBtZXRhZGF0YSBwYXRocyAKICAgICAjIHJhdGhlciB0aGFu
IGhvc3QgcHJvdmlkZWQKLSAgICBwYXRoY21kID0gJ2V4cG9ydCBQQVRIPSVz
OyAlcycgJSAoZGF0YS5leHBhbmQoJyR7UEFUSH0nLCBkKSwgY21kKQorICAg
IGNtZCA9ICdleHBvcnQgUEFUSD0lczsgJXMnICUgKGRhdGEuZXhwYW5kKCck
e1BBVEh9JywgZCksIGNtZCkKIAotICAgIG15cmV0ID0gb3Muc3lzdGVtKHBh
dGhjbWQpCisgICAgIyByZWRpcmVjdCBzdGRlcnIgdG8gc3Rkb3V0CisgICAg
c3Rkb3V0X2hhbmRsZSA9IG9zLnBvcGVuKGNtZCArICIgMj4mMSIsICJyIikK
KyAgICBvdXRwdXQgPSAiIgorCisgICAgd2hpbGUgMToKKyAgICAgICAgbGlu
ZSA9IHN0ZG91dF9oYW5kbGUucmVhZGxpbmUoKQorICAgICAgICBpZiBub3Qg
bGluZToKKyAgICAgICAgICAgIGJyZWFrCisgICAgICAgIGlmIG5vdCBxdWll
dDoKKyAgICAgICAgICAgIHByaW50IGxpbmUKKyAgICAgICAgb3V0cHV0ICs9
IGxpbmUKKworICAgIHN0YXR1cyA9ICBzdGRvdXRfaGFuZGxlLmNsb3NlKCkg
b3IgMAorICAgIHNpZ25hbCA9IHN0YXR1cyA+PiA4CisgICAgZXhpdHN0YXR1
cyA9IHN0YXR1cyAmIDB4ZmYKKworICAgIGlmIHNpZ25hbDoKKyAgICAgICAg
cmFpc2UgRmV0Y2hFcnJvcigiRmV0Y2ggY29tbWFuZCAlcyBmYWlsZWQgd2l0
aCBzaWduYWwgJXMsIG91dHB1dDpcbiVzIiAlIChjbWQsIHNpZ25hbCwgb3V0
cHV0KSkKKyAgICBlbGlmIHN0YXR1cyAhPSAwOgorICAgICAgICByYWlzZSBG
ZXRjaEVycm9yKCJGZXRjaCBjb21tYW5kICVzIGZhaWxlZCB3aXRoIGV4aXQg
Y29kZSAlcywgb3V0cHV0OlxuJXMiICUgKGNtZCwgc3RhdHVzLCBvdXRwdXQp
KQorCisgICAgcmV0dXJuIG91dHB1dAorCitkZWYgY29udGFpbnNfcmVmKHRh
ZywgZCk6CisgICAgb3V0cHV0ID0gcnVuZmV0Y2hjbWQoImdpdCBsb2cgLS1w
cmV0dHk9b25lbGluZSAtbiAxICVzIC0tIDI+IC9kZXYvbnVsbCB8IHdjIC1s
IiAlIHRhZywgZCwgVHJ1ZSkKKyAgICByZXR1cm4gb3V0cHV0LnNwbGl0KClb
MF0gIT0gIjAiCisKK2RlZiBsYXRlc3RfcmV2aXNpb24ocHJvdG8sIHVzZXIs
IGhvc3QsIHBhdGgsIGJyYW5jaCwgZCk6CisgICAgIiIiCisgICAgQ29tcHV0
ZSB0aGUgSEVBRCByZXZpc2lvbiBmb3IgdGhlIHVybAorICAgICIiIgorICAg
IGlmIHVzZXI6CisgICAgICAgIHVzZXJuYW1lID0gdXNlciArICdAJworICAg
IGVsc2U6CisgICAgICAgIHVzZXJuYW1lID0gIiIKIAotICAgIGlmIG15cmV0
ICE9IDA6Ci0gICAgICAgIHJhaXNlIEZldGNoRXJyb3IoIkdpdDogJXMgZmFp
bGVkIiAlIHBhdGhjbWQpCisgICAgb3V0cHV0ID0gcnVuZmV0Y2hjbWQoImdp
dCBscy1yZW1vdGUgJXM6Ly8lcyVzJXMgJXMiICUgKHByb3RvLCB1c2VybmFt
ZSwgaG9zdCwgcGF0aCwgYnJhbmNoKSwgZCwgVHJ1ZSkKKyAgICByZXR1cm4g
b3V0cHV0LnNwbGl0KClbMF0KKworZGVmIGdldGJyYW5jaChwYXJtKToKKyAg
ICBpZiAnYnJhbmNoJyBpbiBwYXJtOgorICAgICAgICBicmFuY2ggPSBwYXJt
WydicmFuY2gnXQorICAgIGVsc2U6CisgICAgICAgIGJyYW5jaCA9ICJtYXN0
ZXIiCisgICAgaWYgbm90IGJyYW5jaDoKKyAgICAgICAgYnJhbmNoID0gIm1h
c3RlciIKIAotZGVmIGdldHRhZyhwYXJtKToKKyAgICByZXR1cm4gYnJhbmNo
CisKK2RlZiBnZXR0YWcocGFybSwgcHJvdG8sIHVzZXIsIGhvc3QsIHBhdGgs
IGJyYW5jaCwgZCk6CiAgICAgaWYgJ3RhZycgaW4gcGFybToKICAgICAgICAg
dGFnID0gcGFybVsndGFnJ10KICAgICBlbHNlOgotICAgICAgICB0YWcgPSAi
IgotICAgIGlmIG5vdCB0YWc6Ci0gICAgICAgIHRhZyA9ICJtYXN0ZXIiCisg
ICAgICAgIHRhZyA9IGxhdGVzdF9yZXZpc2lvbihwcm90bywgdXNlciwgaG9z
dCwgcGF0aCwgYnJhbmNoLCBkKQorICAgIGlmIG5vdCB0YWcgb3IgdGFnID09
ICJtYXN0ZXIiOgorICAgICAgICB0YWcgPSBsYXRlc3RfcmV2aXNpb24ocHJv
dG8sIHVzZXIsIGhvc3QsIHBhdGgsIGJyYW5jaCwgZCkKIAogICAgIHJldHVy
biB0YWcKIApAQCAtNzYsNyArMTIwLDkgQEAKICAgICBpZiAibG9jYWxwYXRo
IiBpbiBwYXJtOgogICAgICAgICByZXR1cm4gcGFybVsibG9jYWxwYXRoIl0K
IAotICAgIHRhZyA9IGdldHRhZyhwYXJtKQorICAgIHByb3RvID0gZ2V0cHJv
dG9jb2wocGFybSkKKyAgICBicmFuY2ggPSBnZXRicmFuY2gocGFybSkKKyAg
ICB0YWcgPSBnZXR0YWcocGFybSwgcHJvdG8sIHVzZXIsIGhvc3QsIHBhdGgs
IGJyYW5jaCwgZCkKIAogICAgIHJldHVybiBkYXRhLmV4cGFuZCgnZ2l0XyVz
JXNfJXMudGFyLmd6JyAlIChob3N0LCBwYXRoLnJlcGxhY2UoJy8nLCAnLicp
LCB0YWcpLCBkKQogCkBAIC0xMDQsOCArMTUwLDE0IEBACiAgICAgICAgIGZv
ciBsb2MgaW4gdXJsczoKICAgICAgICAgICAgICh0eXBlLCBob3N0LCBwYXRo
LCB1c2VyLCBwc3dkLCBwYXJtKSA9IGJiLmRlY29kZXVybChkYXRhLmV4cGFu
ZChsb2MsIGQpKQogCi0gICAgICAgICAgICB0YWcgPSBnZXR0YWcocGFybSkK
ICAgICAgICAgICAgIHByb3RvID0gZ2V0cHJvdG9jb2wocGFybSkKKyAgICAg
ICAgICAgIGJyYW5jaCA9IGdldGJyYW5jaChwYXJtKQorICAgICAgICAgICAg
dGFnID0gZ2V0dGFnKHBhcm0sIHByb3RvLCB1c2VyLCBob3N0LCBwYXRoLCBi
cmFuY2gsIGQpCisKKyAgICAgICAgICAgIGlmIHVzZXI6CisgICAgICAgICAg
ICAgICAgdXNlcm5hbWUgPSB1c2VyICsgJ0AnCisgICAgICAgICAgICBlbHNl
OgorICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gIiIKIAogICAgICAgICAg
ICAgZ2l0c3JjbmFtZSA9ICclcyVzJyAlIChob3N0LCBwYXRoLnJlcGxhY2Uo
Jy8nLCAnLicpKQogCkBAIC0xMTYsNDMgKzE2OCwzOSBAQAogICAgICAgICAg
ICAgY29uYW1lID0gJyVzJyAlICh0YWcpCiAgICAgICAgICAgICBjb2RpciA9
IG9zLnBhdGguam9pbihyZXBvZGlyLCBjb25hbWUpCiAKLSAgICAgICAgICAg
IGNvZmlsZSA9IHNlbGYubG9jYWxwYXRoKGxvYywgZCkKLQotICAgICAgICAg
ICAgIyB0YWc9PSJtYXN0ZXIiIG11c3QgYWx3YXlzIHVwZGF0ZQotICAgICAg
ICAgICAgaWYgKHRhZyAhPSAibWFzdGVyIikgYW5kIEZldGNoLnRyeV9taXJy
b3IoZCwgbG9jYWxmaWxlKGxvYywgZCkpOgotICAgICAgICAgICAgICAgIGJi
LmRlYnVnKDEsICIlcyBhbHJlYWR5IGV4aXN0cyAob3Igd2FzIHN0YXNoZWQp
LiBTa2lwcGluZyBnaXQgY2hlY2tvdXQuIiAlIGNvZmlsZSkKLSAgICAgICAg
ICAgICAgICBjb250aW51ZQotCiAgICAgICAgICAgICBpZiBub3Qgb3MucGF0
aC5leGlzdHMocmVwb2Rpcik6CiAgICAgICAgICAgICAgICAgaWYgRmV0Y2gu
dHJ5X21pcnJvcihkLCByZXBvZmlsZW5hbWUpOiAgICAKICAgICAgICAgICAg
ICAgICAgICAgYmIubWtkaXJoaWVyKHJlcG9kaXIpCiAgICAgICAgICAgICAg
ICAgICAgIG9zLmNoZGlyKHJlcG9kaXIpCi0gICAgICAgICAgICAgICAgICAg
IHJ1bmdpdGNtZCgidGFyIC14emYgJXMiICUgKHJlcG9maWxlKSxkKQorICAg
ICAgICAgICAgICAgICAgICBydW5mZXRjaGNtZCgidGFyIC14emYgJXMiICUg
KHJlcG9maWxlKSxkKQogICAgICAgICAgICAgICAgIGVsc2U6Ci0gICAgICAg
ICAgICAgICAgICAgIHJ1bmdpdGNtZCgiZ2l0IGNsb25lIC1uICVzOi8vJXMl
cyAlcyIgJSAocHJvdG8sIGhvc3QsIHBhdGgsIHJlcG9kaXIpLGQpCisgICAg
ICAgICAgICAgICAgICAgIHJ1bmZldGNoY21kKCJnaXQgY2xvbmUgLW4gJXM6
Ly8lcyVzJXMgJXMiICUgKHByb3RvLCB1c2VybmFtZSwgaG9zdCwgcGF0aCwg
cmVwb2RpciksZCkKIAogICAgICAgICAgICAgb3MuY2hkaXIocmVwb2RpcikK
LSAgICAgICAgICAgIHJ1bmdpdGNtZCgiZ2l0IHB1bGwgJXM6Ly8lcyVzIiAl
IChwcm90bywgaG9zdCwgcGF0aCksZCkKLSAgICAgICAgICAgIHJ1bmdpdGNt
ZCgiZ2l0IHB1bGwgLS10YWdzICVzOi8vJXMlcyIgJSAocHJvdG8sIGhvc3Qs
IHBhdGgpLGQpCi0gICAgICAgICAgICBydW5naXRjbWQoImdpdCBwcnVuZS1w
YWNrZWQiLCBkKQotICAgICAgICAgICAgcnVuZ2l0Y21kKCJnaXQgcGFjay1y
ZWR1bmRhbnQgLS1hbGwgfCB4YXJncyAtciBybSIsIGQpCiAgICAgICAgICAg
ICAjIFJlbW92ZSBhbGwgYnV0IHRoZSAuZ2l0IGRpcmVjdG9yeQotICAgICAg
ICAgICAgcnVuZ2l0Y21kKCJybSAqIC1SZiIsIGQpCi0gICAgICAgICAgICAj
IG9sZCBtZXRob2Qgb2YgZG93bmxvYWRpbmcgdGFncwotICAgICAgICAgICAg
I3J1bmdpdGNtZCgicnN5bmMgLWEgLS12ZXJib3NlIC0tc3RhdHMgLS1wcm9n
cmVzcyByc3luYzovLyVzJXMvICVzIiAlIChob3N0LCBwYXRoLCBvcy5wYXRo
LmpvaW4ocmVwb2RpciwgIi5naXQiLCAiIikpLGQpCisgICAgICAgICAgICBp
ZiBub3QgY29udGFpbnNfcmVmKHRhZywgZCk6CisgICAgICAgICAgICAgICAg
cnVuZmV0Y2hjbWQoInJtICogLVJmIiwgZCkKKyAgICAgICAgICAgICAgICBy
dW5mZXRjaGNtZCgiZ2l0IGZldGNoICVzOi8vJXMlcyVzICVzIiAlIChwcm90
bywgdXNlcm5hbWUsIGhvc3QsIHBhdGgsIGJyYW5jaCksIGQpCisgICAgICAg
ICAgICAgICAgcnVuZmV0Y2hjbWQoImdpdCBmZXRjaCAtLXRhZ3MgJXM6Ly8l
cyVzJXMiICUgKHByb3RvLCB1c2VybmFtZSwgaG9zdCwgcGF0aCksIGQpCisg
ICAgICAgICAgICAgICAgcnVuZmV0Y2hjbWQoImdpdCBwcnVuZS1wYWNrZWQi
LCBkKQorICAgICAgICAgICAgICAgIHJ1bmZldGNoY21kKCJnaXQgcGFjay1y
ZWR1bmRhbnQgLS1hbGwgfCB4YXJncyAtciBybSIsIGQpCiAKICAgICAgICAg
ICAgIG9zLmNoZGlyKHJlcG9kaXIpCiAgICAgICAgICAgICBiYi5ub3RlKCJD
cmVhdGluZyB0YXJiYWxsIG9mIGdpdCByZXBvc2l0b3J5IikKLSAgICAgICAg
ICAgIHJ1bmdpdGNtZCgidGFyIC1jemYgJXMgJXMiICUgKHJlcG9maWxlLCBv
cy5wYXRoLmpvaW4oIi4iLCAiLmdpdCIsICIqIikgKSxkKQorICAgICAgICAg
ICAgcnVuZmV0Y2hjbWQoInRhciAtY3pmICVzICVzIiAlIChyZXBvZmlsZSwg
b3MucGF0aC5qb2luKCIuIiwgIi5naXQiLCAiKiIpICksZCkKIAogICAgICAg
ICAgICAgaWYgb3MucGF0aC5leGlzdHMoY29kaXIpOgogICAgICAgICAgICAg
ICAgIHBydW5lZGlyKGNvZGlyKQogCiAgICAgICAgICAgICBiYi5ta2Rpcmhp
ZXIoY29kaXIpCiAgICAgICAgICAgICBvcy5jaGRpcihyZXBvZGlyKQotICAg
ICAgICAgICAgcnVuZ2l0Y21kKCJnaXQgcmVhZC10cmVlICVzIiAlICh0YWcp
LGQpCi0gICAgICAgICAgICBydW5naXRjbWQoImdpdCBjaGVja291dC1pbmRl
eCAtcSAtZiAtLXByZWZpeD0lcyAtYSIgJSAob3MucGF0aC5qb2luKGNvZGly
LCAiZ2l0IiwgIiIpKSxkKQorICAgICAgICAgICAgY29wYXRoID0gb3MucGF0
aC5qb2luKGNvZGlyLCAiZ2l0IiwgIiIpCisgICAgICAgICAgICBydW5mZXRj
aGNtZCgiZ2l0IHJlYWQtdHJlZSAlcyIgJSAodGFnKSxkKQorICAgICAgICAg
ICAgcnVuZmV0Y2hjbWQoImdpdCBjaGVja291dC1pbmRleCAtcSAtZiAtLXBy
ZWZpeD0lcyAtYSIgJSAoY29wYXRoKSxkKQorICAgICAgICAgICAgYmIubWtk
aXJoaWVyKG9zLnBhdGguam9pbihjb3BhdGgsICIuZ2l0IiwgIiIpKQorICAg
ICAgICAgICAgcnVuZmV0Y2hjbWQoIkxBTkc9XCJlblwiIGdpdCBsb2cgJXMg
LS1tYXgtY291bnQ9MSAtLWRhdGU9aXNvIC0tID4gJXMuZ2l0L2xhc3RfY29t
bWl0X2luZm8iICUgKHRhZywgY29wYXRoKSxkKQorICAgICAgICAgICAgcnVu
ZmV0Y2hjbWQoImVjaG8gJXMgPiAlcy5naXQvYnJhbmNoIiAlIChicmFuY2gs
IGNvcGF0aCksZCkKIAogICAgICAgICAgICAgb3MuY2hkaXIoY29kaXIpCiAg
ICAgICAgICAgICBiYi5ub3RlKCJDcmVhdGluZyB0YXJiYWxsIG9mIGdpdCBj
aGVja291dCIpCi0gICAgICAgICAgICBydW5naXRjbWQoInRhciAtY3pmICVz
ICVzIiAlIChjb2ZpbGUsIG9zLnBhdGguam9pbigiLiIsICIqIikgKSxkKQor
ICAgICAgICAgICAgcnVuZmV0Y2hjbWQoInRhciAtY3pmICVzICVzIiAlIChz
ZWxmLmxvY2FscGF0aChsb2MsIGQpLCBvcy5wYXRoLmpvaW4oIi4iLCAiKiIp
ICksZCkK
====
end-file-1.6.8a
start-file-1.8.12a
begin-base64 644 1.8.12a.diff
ZGlmZiAtTmF1ciAxLjguMTIvYmluL2JpdGJha2UgMS44LjEyYS9iaW4vYml0
YmFrZQotLS0gMS44LjEyL2Jpbi9iaXRiYWtlCTIwMDktMDEtMDIgMTM6NDE6
MzMuMDAwMDAwMDAwICswMTAwCisrKyAxLjguMTJhL2Jpbi9iaXRiYWtlCTIw
MDgtMTItMjggMDA6MzY6MzUuMDAwMDAwMDAwICswMTAwCkBAIC0yNyw3ICsy
Nyw3IEBACiBpbXBvcnQgYmIKIGZyb20gYmIgaW1wb3J0IGNvb2tlcgogCi1f
X3ZlcnNpb25fXyA9ICIxLjguMTIiCitfX3ZlcnNpb25fXyA9ICIxLjguMTJh
IgogCiAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSMKICMgQkJP
cHRpb25zCmRpZmYgLU5hdXIgMS44LjEyL2xpYi9iYi9DT1cucHkgMS44LjEy
YS9saWIvYmIvQ09XLnB5Ci0tLSAxLjguMTIvbGliL2JiL0NPVy5weQkyMDA5
LTAxLTAyIDEzOjQxOjMzLjAwMDAwMDAwMCArMDEwMAorKysgMS44LjEyYS9s
aWIvYmIvQ09XLnB5CTIwMDgtMTItMjggMDA6MzY6MDguMDAwMDAwMDAwICsw
MTAwCkBAIC0yNiwxNyArMjYsMzEgQEAKIGZyb20gaW5zcGVjdCBpbXBvcnQg
Z2V0bXJvCiAKIGltcG9ydCBjb3B5Ci1pbXBvcnQgdHlwZXMsIHNldHMKLXR5
cGVzLkltbXV0YWJsZVR5cGVzID0gdHVwbGUoWyBcCi0gICAgdHlwZXMuQm9v
bGVhblR5cGUsIFwKLSAgICB0eXBlcy5Db21wbGV4VHlwZSwgXAotICAgIHR5
cGVzLkZsb2F0VHlwZSwgXAotICAgIHR5cGVzLkludFR5cGUsIFwKLSAgICB0
eXBlcy5Mb25nVHlwZSwgXAotICAgIHR5cGVzLk5vbmVUeXBlLCBcCi0gICAg
dHlwZXMuVHVwbGVUeXBlLCBcCi0gICAgc2V0cy5JbW11dGFibGVTZXRdICsg
XAotICAgIGxpc3QodHlwZXMuU3RyaW5nVHlwZXMpKQoraW1wb3J0IHR5cGVz
Cit0cnk6CisgICAgc2V0CisgICAgdHlwZXMuSW1tdXRhYmxlVHlwZXMgPSB0
dXBsZShbIFwKKyAgICAgICAgdHlwZXMuQm9vbGVhblR5cGUsIFwKKyAgICAg
ICAgdHlwZXMuQ29tcGxleFR5cGUsIFwKKyAgICAgICAgdHlwZXMuRmxvYXRU
eXBlLCBcCisgICAgICAgIHR5cGVzLkludFR5cGUsIFwKKyAgICAgICAgdHlw
ZXMuTG9uZ1R5cGUsIFwKKyAgICAgICAgdHlwZXMuTm9uZVR5cGUsIFwKKyAg
ICAgICAgdHlwZXMuVHVwbGVUeXBlLCBcCisgICAgICAgIGZyb3plbnNldF0g
KyBcCisgICAgICAgIGxpc3QodHlwZXMuU3RyaW5nVHlwZXMpKQorZXhjZXB0
IE5hbWVFcnJvcjoKKyAgICBpbXBvcnQgc2V0cworICAgIHR5cGVzLkltbXV0
YWJsZVR5cGVzID0gdHVwbGUoWyBcCisgICAgICAgIHR5cGVzLkJvb2xlYW5U
eXBlLCBcCisgICAgICAgIHR5cGVzLkNvbXBsZXhUeXBlLCBcCisgICAgICAg
IHR5cGVzLkZsb2F0VHlwZSwgXAorICAgICAgICB0eXBlcy5JbnRUeXBlLCBc
CisgICAgICAgIHR5cGVzLkxvbmdUeXBlLCBcCisgICAgICAgIHR5cGVzLk5v
bmVUeXBlLCBcCisgICAgICAgIHR5cGVzLlR1cGxlVHlwZSwgXAorICAgICAg
ICBzZXRzLkltbXV0YWJsZVNldF0gKyBcCisgICAgICAgIGxpc3QodHlwZXMu
U3RyaW5nVHlwZXMpKQogCiBNVVRBQkxFID0gIl9fbXV0YWJsZV9fIgogCmRp
ZmYgLU5hdXIgMS44LjEyL2xpYi9iYi9jYWNoZS5weSAxLjguMTJhL2xpYi9i
Yi9jYWNoZS5weQotLS0gMS44LjEyL2xpYi9iYi9jYWNoZS5weQkyMDA5LTAx
LTAyIDEzOjQxOjMzLjAwMDAwMDAwMCArMDEwMAorKysgMS44LjEyYS9saWIv
YmIvY2FjaGUucHkJMjAwOC0xMi0yOCAwMDozMDoxMS4wMDAwMDAwMDAgKzAx
MDAKQEAgLTMxLDcgKzMxLDEwIEBACiBpbXBvcnQgb3MsIHJlCiBpbXBvcnQg
YmIuZGF0YQogaW1wb3J0IGJiLnV0aWxzCi1mcm9tIHNldHMgaW1wb3J0IFNl
dAordHJ5OgorICAgIHNldAorZXhjZXB0IE5hbWVFcnJvcjoKKyAgICBmcm9t
IHNldHMgaW1wb3J0IFNldCBhcyBzZXQKIAogdHJ5OgogICAgIGltcG9ydCBj
UGlja2xlIGFzIHBpY2tsZQpAQCAtNDczLDYgKzQ3Niw2IEBACiAgICAgICAg
IChzZXQgZWxzZXdoZXJlKQogICAgICAgICAiIiIKICAgICAgICAgc2VsZi5p
Z25vcmVkX2RlcGVuZGVuY2llcyA9IFtdCi0gICAgICAgIHNlbGYud29ybGRf
dGFyZ2V0ID0gU2V0KCkKKyAgICAgICAgc2VsZi53b3JsZF90YXJnZXQgPSBz
ZXQoKQogICAgICAgICBzZWxmLmJiZmlsZV9wcmlvcml0eSA9IHt9CiAgICAg
ICAgIHNlbGYuYmJmaWxlX2NvbmZpZ19wcmlvcml0aWVzID0gW10KZGlmZiAt
TmF1ciAxLjguMTIvbGliL2JiL2Nvb2tlci5weSAxLjguMTJhL2xpYi9iYi9j
b29rZXIucHkKLS0tIDEuOC4xMi9saWIvYmIvY29va2VyLnB5CTIwMDktMDEt
MDIgMTM6NDE6MzMuMDAwMDAwMDAwICswMTAwCisrKyAxLjguMTJhL2xpYi9i
Yi9jb29rZXIucHkJMjAwOC0xMi0yOCAwMDoyODozOC4wMDAwMDAwMDAgKzAx
MDAKQEAgLTI1LDcgKzI1LDEwIEBACiBpbXBvcnQgc3lzLCBvcywgZ2V0b3B0
LCBnbG9iLCBjb3B5LCBvcy5wYXRoLCByZSwgdGltZQogaW1wb3J0IGJiCiBm
cm9tIGJiIGltcG9ydCB1dGlscywgZGF0YSwgcGFyc2UsIGV2ZW50LCBjYWNo
ZSwgcHJvdmlkZXJzLCB0YXNrZGF0YSwgcnVucXVldWUKLWZyb20gc2V0cyBp
bXBvcnQgU2V0Cit0cnk6CisgICAgc2V0CitleGNlcHQgTmFtZUVycm9yOgor
ICAgIGZyb20gc2V0cyBpbXBvcnQgU2V0IGFzIHNldAogaW1wb3J0IGl0ZXJ0
b29scywgc3JlX2NvbnN0YW50cwogCiBwYXJzZXNwaW4gPSBpdGVydG9vbHMu
Y3ljbGUoIHInfC8tXFwnICkKQEAgLTQ4NSw3ICs0ODgsNyBAQAogCiAgICAg
ICAgICMgVHdlYWsgc29tZSB2YXJpYWJsZXMKICAgICAgICAgaXRlbSA9IHNl
bGYuYmJfY2FjaGUuZ2V0VmFyKCdQTicsIGZuLCBUcnVlKQotICAgICAgICBz
ZWxmLnN0YXR1cy5pZ25vcmVkX2RlcGVuZGVuY2llcyA9IFNldCgpCisgICAg
ICAgIHNlbGYuc3RhdHVzLmlnbm9yZWRfZGVwZW5kZW5jaWVzID0gc2V0KCkK
ICAgICAgICAgc2VsZi5zdGF0dXMuYmJmaWxlX3ByaW9yaXR5W2ZuXSA9IDEK
IAogICAgICAgICAjIFJlbW92ZSBleHRlcm5hbCBkZXBlbmRlbmNpZXMKQEAg
LTU3Nyw3ICs1ODAsNyBAQAogICAgICAgICBzZWxmLnN0YXR1cyA9IGJiLmNh
Y2hlLkNhY2hlRGF0YSgpCiAKICAgICAgICAgaWdub3JlID0gYmIuZGF0YS5n
ZXRWYXIoIkFTU1VNRV9QUk9WSURFRCIsIHNlbGYuY29uZmlndXJhdGlvbi5k
YXRhLCAxKSBvciAiIgotICAgICAgICBzZWxmLnN0YXR1cy5pZ25vcmVkX2Rl
cGVuZGVuY2llcyA9IFNldCggaWdub3JlLnNwbGl0KCkgKQorICAgICAgICBz
ZWxmLnN0YXR1cy5pZ25vcmVkX2RlcGVuZGVuY2llcyA9IHNldCggaWdub3Jl
LnNwbGl0KCkgKQogCiAgICAgICAgIHNlbGYuaGFuZGxlQ29sbGVjdGlvbnMo
IGJiLmRhdGEuZ2V0VmFyKCJCQkZJTEVfQ09MTEVDVElPTlMiLCBzZWxmLmNv
bmZpZ3VyYXRpb24uZGF0YSwgMSkgKQogCmRpZmYgLU5hdXIgMS44LjEyL2xp
Yi9iYi9kYXRhX3NtYXJ0LnB5IDEuOC4xMmEvbGliL2JiL2RhdGFfc21hcnQu
cHkKLS0tIDEuOC4xMi9saWIvYmIvZGF0YV9zbWFydC5weQkyMDA5LTAxLTAy
IDEzOjQxOjMzLjAwMDAwMDAwMCArMDEwMAorKysgMS44LjEyYS9saWIvYmIv
ZGF0YV9zbWFydC5weQkyMDA4LTEyLTI4IDAwOjI2OjU3LjAwMDAwMDAwMCAr
MDEwMApAQCAtMzIsNyArMzIsMTAgQEAKIGltcG9ydCBiYgogZnJvbSBiYiAg
IGltcG9ydCB1dGlscywgbWV0aG9kcG9vbAogZnJvbSBDT1cgIGltcG9ydCBD
T1dEaWN0QmFzZQotZnJvbSBzZXRzIGltcG9ydCBTZXQKK3RyeToKKyAgICBz
ZXQKK2V4Y2VwdCBOYW1lRXJyb3I6CisgICAgZnJvbSBzZXRzIGltcG9ydCBT
ZXQgYXMgc2V0CiBmcm9tIG5ldyAgaW1wb3J0IGNsYXNzb2JqCiAKIApAQCAt
MTQyLDcgKzE0NSw3IEBACiAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAg
ICAgICAgc2VsZi5fc3BlY2lhbF92YWx1ZXNba2V5d29yZF0uYWRkKCBiYXNl
ICkKICAgICAgICAgICAgIGV4Y2VwdDoKLSAgICAgICAgICAgICAgICBzZWxm
Ll9zcGVjaWFsX3ZhbHVlc1trZXl3b3JkXSA9IFNldCgpCisgICAgICAgICAg
ICAgICAgc2VsZi5fc3BlY2lhbF92YWx1ZXNba2V5d29yZF0gPSBzZXQoKQog
ICAgICAgICAgICAgICAgIHNlbGYuX3NwZWNpYWxfdmFsdWVzW2tleXdvcmRd
LmFkZCggYmFzZSApCiAKICAgICAgICAgICAgIHJldHVybgpAQCAtMTU0LDcg
KzE1Nyw3IEBACiAgICAgICAgIGlmICdfJyBpbiB2YXI6CiAgICAgICAgICAg
ICBvdmVycmlkZSA9IHZhclt2YXIucmZpbmQoJ18nKSsxOl0KICAgICAgICAg
ICAgIGlmIG5vdCBzZWxmLl9zZWVuX292ZXJyaWRlcy5oYXNfa2V5KG92ZXJy
aWRlKToKLSAgICAgICAgICAgICAgICBzZWxmLl9zZWVuX292ZXJyaWRlc1tv
dmVycmlkZV0gPSBTZXQoKQorICAgICAgICAgICAgICAgIHNlbGYuX3NlZW5f
b3ZlcnJpZGVzW292ZXJyaWRlXSA9IHNldCgpCiAgICAgICAgICAgICBzZWxm
Ll9zZWVuX292ZXJyaWRlc1tvdmVycmlkZV0uYWRkKCB2YXIgKQogCiAgICAg
ICAgICMgc2V0dGluZyB2YXIKZGlmZiAtTmF1ciAxLjguMTIvbGliL2JiL3J1
bnF1ZXVlLnB5IDEuOC4xMmEvbGliL2JiL3J1bnF1ZXVlLnB5Ci0tLSAxLjgu
MTIvbGliL2JiL3J1bnF1ZXVlLnB5CTIwMDktMDEtMDIgMTM6NDE6MzMuMDAw
MDAwMDAwICswMTAwCisrKyAxLjguMTJhL2xpYi9iYi9ydW5xdWV1ZS5weQky
MDA4LTEyLTI4IDAwOjMxOjU3LjAwMDAwMDAwMCArMDEwMApAQCAtMjMsNyAr
MjMsMTAgQEAKICMgNTEgRnJhbmtsaW4gU3RyZWV0LCBGaWZ0aCBGbG9vciwg
Qm9zdG9uLCBNQSAwMjExMC0xMzAxIFVTQS4KIAogZnJvbSBiYiBpbXBvcnQg
bXNnLCBkYXRhLCBldmVudCwgbWtkaXJoaWVyLCB1dGlscwotZnJvbSBzZXRz
IGltcG9ydCBTZXQgCit0cnk6CisgICAgc2V0CitleGNlcHQgTmFtZUVycm9y
OgorICAgIGZyb20gc2V0cyBpbXBvcnQgU2V0IGFzIHNldCAKIGltcG9ydCBi
Yiwgb3MsIHN5cwogaW1wb3J0IHNpZ25hbAogaW1wb3J0IHN0YXQKQEAgLTUy
NSw4ICs1MjgsOCBAQAogCiAgICAgICAgICAgICBzZWxmLnJ1bnFfZm5pZC5h
cHBlbmQodGFza0RhdGEudGFza3NfZm5pZFt0YXNrXSkKICAgICAgICAgICAg
IHNlbGYucnVucV90YXNrLmFwcGVuZCh0YXNrRGF0YS50YXNrc19uYW1lW3Rh
c2tdKQotICAgICAgICAgICAgc2VsZi5ydW5xX2RlcGVuZHMuYXBwZW5kKFNl
dChkZXBlbmRzKSkKLSAgICAgICAgICAgIHNlbGYucnVucV9yZXZkZXBzLmFw
cGVuZChTZXQoKSkKKyAgICAgICAgICAgIHNlbGYucnVucV9kZXBlbmRzLmFw
cGVuZChzZXQoZGVwZW5kcykpCisgICAgICAgICAgICBzZWxmLnJ1bnFfcmV2
ZGVwcy5hcHBlbmQoc2V0KCkpCiAKICAgICAgICAgICAgIHJ1bnFfYnVpbGQu
YXBwZW5kKDApCiAKQEAgLTYyMiw3ICs2MjUsNyBAQAogICAgICAgICAgICAg
ICAgIGlmIG1hcHNbb3JpZ2RlcF0gPT0gLTE6CiAgICAgICAgICAgICAgICAg
ICAgIGJiLm1zZy5mYXRhbChiYi5tc2cuZG9tYWluLlJ1blF1ZXVlLCAiSW52
YWxpZCBtYXBwaW5nIC0gU2hvdWxkIG5ldmVyIGhhcHBlbiEiKQogICAgICAg
ICAgICAgICAgIG5ld2RlcHMuYXBwZW5kKG1hcHNbb3JpZ2RlcF0pCi0gICAg
ICAgICAgICBzZWxmLnJ1bnFfZGVwZW5kc1tsaXN0aWRdID0gU2V0KG5ld2Rl
cHMpCisgICAgICAgICAgICBzZWxmLnJ1bnFfZGVwZW5kc1tsaXN0aWRdID0g
c2V0KG5ld2RlcHMpCiAKICAgICAgICAgYmIubXNnLm5vdGUoMiwgYmIubXNn
LmRvbWFpbi5SdW5RdWV1ZSwgIkFzc2lnbiBXZWlnaHRpbmdzIikKIAo=
====
end-file-1.8.12a
